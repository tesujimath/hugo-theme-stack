{{ $explicitly_related := slice -}}
{{ range .Params.related -}}
{{ $explicitly_related = $explicitly_related | append ($.Site.GetPage . ) -}}
{{ end -}}
{{ $related := $explicitly_related | append (where (.Site.RegularPages.Related .) "Params.hidden" "!=" true) | uniq | first 5 }}
{{ with $related }}
<aside class="related-content--wrapper">
    <h2 class="section-title">{{ T "article.relatedContent" }}</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            {{ if $.Site.Params.article.nextRelated }}
                {{ with $.Next }}
                    {{ partial "article-list/tile" (dict "context" . "size" (printf "250x150 %s" .Params.image_anchor) "Type" "articleList" "annotation" "Next:") }}
                {{ end }}
            {{ end }}
            {{ range . }}
                {{ partial "article-list/tile" (dict "context" . "size" (printf "250x150 %s" .Params.image_anchor) "Type" "articleList") }}
            {{ end }}
        </div>
    </div>
</aside>
{{ end }}
